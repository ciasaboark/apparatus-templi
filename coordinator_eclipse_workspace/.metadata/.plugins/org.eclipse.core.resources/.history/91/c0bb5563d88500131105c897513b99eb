package org.apparatus_templi;

/**
 * A driver for a remote module with a number of LEDs.  Each LED
 * 	can be turned on or off, and the driver keeps track of the state
 * 	of each 'pixel'
 * @author Jonathan Nelson <ciasaboark@gmail.com>
 *
 */
public class StatefullLed extends Coordinator implements ControllerModule, Runnable {
	private String moduleName = "StatefullLED";
	private boolean running = true;
	
	//our remote module has three LEDs attached
	private boolean led1;
	private boolean led2;
	private boolean led3;
	
	@Override
	public String getModuleType() {
		// TODO Auto-generated method stub
		return "Controller";
	}

	@Override
	public String getModuleName() {
		// TODO Auto-generated method stub
		return moduleName;
	}

	@Override
	public void receiveMessage(String message) {
		//throw away the message for now
		Log.d(moduleName, "received message, ignoring");

	}

	@Override
	public void terminate() {
		running = false;

	}

	@Override
	public String getWidgetXML() {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public String getFullPageXML() {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public void run() {
		//since we don't know the state of the remote module at the beginning we
		//+ tell it to reset to a default state (all LEDs off).  If the remote
		//+ side does not respond within 3 seconds then the driver will terminate
		if (super.sendCommandAndWait(moduleName, "RESET", 3).equals("OK")) {
			led1 = false;
			led2 = false;
			led3 = false;
		} else {
			terminate();
		}
		
		
		while (running) {
			
		}

	}

	@Override
	public String getControllerListXML() {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public String getControllerStatusXML(String controllerName) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public void tellController(String controllerName, String command) {
		// TODO Auto-generated method stub

	}

}
